# ç‚¹ç‚¹åœˆ DotCircle - AI ä¸Šä¸‹æ–‡æŒ‡å—

> **é¡¹ç›®å®šä½**: çº¯å…¬ç›Šçš„è…¾è®¯å…ƒå®æŠ½å¥–äº’åŠ©å¹³å°ï¼Œé€šè¿‡å¾®ä¿¡å°ç¨‹åºå’Œå¾®ä¿¡äº‘å¼€å‘å®ç°
> 
> **æ ¸å¿ƒç†å¿µ**: å…ˆåŠ©äººï¼Œåå—åŠ©ã€‚ä¿¡ç”¨è¶Šå¥½ï¼Œæ›å…‰è¶Šé«˜ã€‚
> 
> **Last Updated**: 2026-02-02

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### èƒŒæ™¯ä¸ç—›ç‚¹

è…¾è®¯å…ƒå®åˆ†äº«æŠ½å¥–æ´»åŠ¨å¯¼è‡´å¾®ä¿¡ç¾¤åˆ·å±ä¸¥é‡ï¼š
1. å¾®ä¿¡ç¾¤åˆ·å±ä¸¥é‡ï¼Œå½±å“æ­£å¸¸äº¤æµ
2. æŠ½å¥–ç¤¼åŒ…é¢†å–ç‡ä½
3. ç¼ºä¹æœ‰æ•ˆçš„äº’åŠ©æœºåˆ¶

### è§£å†³æ–¹æ¡ˆ

**ç‚¹ç‚¹åœˆ** æä¾›ç»“æ„åŒ–äº’åŠ©å¹³å°ï¼š
- ç”¨æˆ·å¿…é¡»å…ˆå¸®åŠ©ä»–äºº(é¢†å–2ä¸ªç¤¼åŒ…)ï¼Œæ‰èƒ½å‘å¸ƒè‡ªå·±çš„ç¤¼åŒ…
- ä¿¡ç”¨ä½“ç³»ç¡®ä¿è‰¯æ€§ç”Ÿæ€(60åˆ†èµ·æ­¥ï¼Œæ»¡åˆ†100)
- æ›å…‰æœºåˆ¶æ¿€åŠ±é«˜è´¨é‡äº’åŠ©(ä¿¡ç”¨ç­‰çº§æƒé‡2.0x-0.5x)

### æ ¸å¿ƒæœºåˆ¶æµç¨‹

```
ç”¨æˆ·è¿›å…¥å¹³å°
    â†“
é¢†å–2ä¸ªä»–äººç¤¼åŒ…ï¼ˆå®Œæˆäº’åŠ©ä»»åŠ¡ï¼‰
    â†“
è·å¾—å‘å¸ƒèµ„æ ¼
    â†“
å‘å¸ƒè‡ªå·±çš„ç¤¼åŒ…
    â†“
å…¶ä»–ç”¨æˆ·é¢†å–ï¼Œå®Œæˆé—­ç¯
```

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    subgraph ç”¨æˆ·å±‚
        A[å¾®ä¿¡å°ç¨‹åº] --> B[å¾®ä¿¡ç™»å½•]
        A --> C[é¡µé¢äº¤äº’]
    end

    subgraph äº‘å¼€å‘å±‚
        D[äº‘å‡½æ•°] --> E[äº‘æ•°æ®åº“]
        D --> F[äº‘å­˜å‚¨]
        G[å®šæ—¶è§¦å‘å™¨] --> D
    end

    subgraph åŠŸèƒ½æ¨¡å—
        H[ç”¨æˆ·ç³»ç»Ÿ] --> I[ä¿¡ç”¨ä½“ç³»]
        H --> J[ç­‰çº§ä½“ç³»]
        K[ç¤¼åŒ…ç³»ç»Ÿ] --> L[å‘å¸ƒ/é¢†å–]
        K --> M[å®¡æ ¸æœºåˆ¶]
        N[äº’åŠ©ç³»ç»Ÿ] --> O[äº’åŠ©è®°å½•]
        N --> P[å¥‘çº¦æœºåˆ¶]
        Q[æ’è¡Œæ¦œ] --> R[4ç±»æ¦œå•]
        S[ä¸¾æŠ¥ç³»ç»Ÿ] --> T[è‡ªåŠ¨å¤„ç†]
        U[ç¾¤ç»„ç³»ç»Ÿ]
        V[æˆå°±å¾½ç« ]
    end

    C --> D
    D --> H
    D --> K
    D --> N
    D --> Q
    D --> S
    D --> U
    D --> V
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ | å¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¡†æ¶ | WXML + WXSS + JS |
| åç«¯ | å¾®ä¿¡äº‘å¼€å‘ | äº‘å‡½æ•° + äº‘æ•°æ®åº“ + äº‘å­˜å‚¨ |
| æ•°æ®åº“ | MongoDB | å¾®ä¿¡äº‘å¼€å‘æ•°æ®åº“ |
| å­˜å‚¨ | äº‘å­˜å‚¨ | å›¾ç‰‡ç­‰é™æ€èµ„æº |
| è§¦å‘å™¨ | å®šæ—¶è§¦å‘å™¨ | å®šæ—¶ä»»åŠ¡å¤„ç† |

---

## ğŸ“ ç›®å½•ç»“æ„

```
AI-DotCircle/
â”œâ”€â”€ CLAUDE.md                    # æœ¬æ–‡ä»¶ - æ ¹çº§AIä¸Šä¸‹æ–‡
â”œâ”€â”€ DEVELOPMENT.md               # å¼€å‘æ–‡æ¡£
â”œâ”€â”€ miniprogram/                 # å°ç¨‹åºå‰ç«¯
â”‚   â”œâ”€â”€ CLAUDE.md               # å°ç¨‹åºæ¨¡å—æ–‡æ¡£
â”‚   â”œâ”€â”€ pages/                  # é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ components/             # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ app.js/app.json         # å…¥å£é…ç½®
â”œâ”€â”€ cloudfunctions/             # äº‘å‡½æ•°åç«¯
â”‚   â”œâ”€â”€ CLAUDE.md              # äº‘å‡½æ•°æ¨¡å—æ–‡æ¡£
â”‚   â”œâ”€â”€ login/                 # ç™»å½•äº‘å‡½æ•°
â”‚   â”œâ”€â”€ user/                  # ç”¨æˆ·ç›¸å…³
â”‚   â”œâ”€â”€ packages/              # ç¤¼åŒ…ç›¸å…³
â”‚   â”œâ”€â”€ help/                  # äº’åŠ©ç›¸å…³
â”‚   â”œâ”€â”€ credit/                # ä¿¡ç”¨ç›¸å…³
â”‚   â”œâ”€â”€ report/                # ä¸¾æŠ¥ç›¸å…³
â”‚   â”œâ”€â”€ leaderboard/           # æ’è¡Œæ¦œ
â”‚   â”œâ”€â”€ groups/                # ç¾¤ç»„
â”‚   â”œâ”€â”€ admin/                 # ç®¡ç†åå°
â”‚   â”œâ”€â”€ cleanup/               # å®šæ—¶æ¸…ç†
â”‚   â”œâ”€â”€ updateLeaderboard/     # å®šæ—¶æ›´æ–°æ¦œå•
â”‚   â”œâ”€â”€ contractCheck/         # å¥‘çº¦æ£€æŸ¥
â”‚   â””â”€â”€ reportProcessor/       # ä¸¾æŠ¥å¤„ç†
â””â”€â”€ prototype/                  # åŸå‹è®¾è®¡
    â””â”€â”€ prototype1.html        # UIåŸå‹
```

---

## ğŸ”— æ¨¡å—ç´¢å¼•

### å‰ç«¯æ¨¡å—

| æ¨¡å— | è·¯å¾„ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|------|
| é¦–é¡µ | `miniprogram/pages/index/` | ç¤¼åŒ…åˆ—è¡¨ã€æ›å…‰æ’åº | P0 |
| å‘å¸ƒé¡µ | `miniprogram/pages/publish/` | å‘å¸ƒç¤¼åŒ…(é“¾æ¥/å›¾ç‰‡) | P0 |
| ç¤¼åŒ…è¯¦æƒ… | `miniprogram/pages/package/detail/` | ç¤¼åŒ…è¯¦æƒ…ã€å¸®åŠ©æŒ‰é’® | P0 |
| æˆ‘çš„é¡µé¢ | `miniprogram/pages/my/` | ä¸ªäººä¸­å¿ƒã€ä»Šæ—¥ä»»åŠ¡ | P0 |
| åˆ†äº«ç®¡ç† | `miniprogram/pages/my/packages/` | ç®¡ç†æˆ‘çš„åˆ†äº«(å–æ¶ˆ/æ›´æ­£) | P0 |
| ä¿¡ç”¨è®°å½• | `miniprogram/pages/credit/history/` | ä¿¡ç”¨åˆ†å˜åŠ¨è®°å½• | P1 |
| æ’è¡Œæ¦œ | `miniprogram/pages/leaderboard/` | 4ç±»æ¦œå•å±•ç¤º | P1 |
| ä¸¾æŠ¥é¡µ | `miniprogram/pages/report/` | æäº¤ä¸¾æŠ¥ | P1 |
| ç¾¤ç»„ | `miniprogram/pages/groups/` | ç¾¤ç»„åˆ—è¡¨/è¯¦æƒ… | P2 |
| è§„åˆ™è¯´æ˜ | `miniprogram/pages/rules/` | ä¿¡ç”¨è§„åˆ™/æ•™ç¨‹ | P1 |

### åç«¯æ¨¡å—

| æ¨¡å— | è·¯å¾„ | è¯´æ˜ | è§¦å‘æ–¹å¼ |
|------|------|------|----------|
| ç™»å½• | `cloudfunctions/login/` | ç”¨æˆ·ç™»å½•/æ³¨å†Œ | HTTP |
| ç”¨æˆ· | `cloudfunctions/user/` | ç”¨æˆ·ä¿¡æ¯/è®¾ç½® | HTTP |
| ç¤¼åŒ… | `cloudfunctions/packages/` | ç¤¼åŒ…CRUD | HTTP |
| äº’åŠ© | `cloudfunctions/help/` | å¸®åŠ©æ“ä½œ | HTTP |
| ä¿¡ç”¨ | `cloudfunctions/credit/` | ä¿¡ç”¨åˆ†æ“ä½œ | HTTP |
| ä¸¾æŠ¥ | `cloudfunctions/report/` | ä¸¾æŠ¥å¤„ç† | HTTP |
| æ’è¡Œæ¦œ | `cloudfunctions/leaderboard/` | æ¦œå•æŸ¥è¯¢ | HTTP |
| ç¾¤ç»„ | `cloudfunctions/groups/` | ç¾¤ç»„æ“ä½œ | HTTP |
| ç®¡ç† | `cloudfunctions/admin/` | åå°ç®¡ç† | HTTP |
| æ¸…ç† | `cloudfunctions/cleanup/` | æ•°æ®æ¸…ç† | Timer |
| æ¦œå•æ›´æ–° | `cloudfunctions/updateLeaderboard/` | æ›´æ–°æ¦œå• | Timer |
| å¥‘çº¦æ£€æŸ¥ | `cloudfunctions/contractCheck/` | å¥‘çº¦å±¥çº¦æ£€æŸ¥ | Timer |
| ä¸¾æŠ¥å¤„ç† | `cloudfunctions/reportProcessor/` | è‡ªåŠ¨å¤„ç†ä¸¾æŠ¥ | Timer |

---

## ğŸ“Š æ•°æ®åº“é›†åˆ

| é›†åˆå | ç”¨é€” | é¢„ä¼°æ•°æ®é‡ | å…³é”®ç´¢å¼• |
|--------|------|------------|----------|
| `users` | ç”¨æˆ·æ•°æ® | 10ä¸‡+ | _openid(å”¯ä¸€) |
| `packages` | ç¤¼åŒ…æ•°æ® | 100ä¸‡+ | creatorOpenid, status, createdAt |
| `helpRecords` | å¸®åŠ©è®°å½• | 1000ä¸‡+ | packageId, helperOpenid |
| `reports` | ä¸¾æŠ¥æ•°æ® | 10ä¸‡+ | targetId, status, createdAt |
| `creditHistory` | ä¿¡ç”¨è®°å½• | 1000ä¸‡+ | _openid, timestamp |
| `groups` | ç¾¤ç»„æ•°æ® | 1000+ | creatorOpenid |
| `groupMembers` | ç¾¤ç»„æˆå‘˜ | 5ä¸‡+ | groupId, userOpenid |
| `leaderboards` | æ’è¡Œæ¦œ | 4æ¡/æ¬¡ | type, period |
| `systemConfig` | ç³»ç»Ÿé…ç½® | 1æ¡ | _id |
| `adminLogs` | ç®¡ç†å‘˜æ—¥å¿— | 10ä¸‡+ | adminOpenid, timestamp |

---

## ğŸ¨ å…¨å±€çº¦å®š

### å‘½åè§„èŒƒ

```javascript
// å˜é‡ï¼šcamelCase
let userInfo = {}
let creditScore = 60
let isActive = true

// å¸¸é‡ï¼šUPPER_SNAKE
const MAX_HELP = 10
const DEFAULT_CREDIT = 60
const PACKAGE_STATUS = {
  PENDING: 'pending',
  ACTIVE: 'active',
  COMPLETED: 'completed',
  EXPIRED: 'expired',
  REJECTED: 'rejected',
  CANCELLED: 'cancelled'
}

// å‡½æ•°ï¼šcamelCaseï¼ŒåŠ¨è¯å¼€å¤´
function getUserInfo() {}
function handleSubmit() {}
function calculateExposure() {}

// æ–‡ä»¶ï¼škebab-case
// pages/user-profile/index.js
// cloudfunctions/update-credit/index.js

// é›†åˆï¼šå°å†™å¤æ•°
// users, packages, helpRecords
```

### å“åº”æ ¼å¼

```javascript
// ç»Ÿä¸€APIå“åº”æ ¼å¼
{
  success: true/false,
  code: 200/400/401/403/404/500,
  message: 'é”™è¯¯ä¿¡æ¯',
  data: {}
}
```

### é”™è¯¯ç å®šä¹‰

| Code | å«ä¹‰ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| 200 | æˆåŠŸ | æ­£å¸¸å“åº” |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | å‚æ•°ç¼ºå¤±/æ ¼å¼é”™è¯¯ |
| 401 | æœªç™»å½• | éœ€è¦ç™»å½• |
| 403 | æƒé™ä¸è¶³ | æ“ä½œæ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | æ•°æ®æœªæ‰¾åˆ° |
| 429 | é¢‘ç‡é™åˆ¶ | æ“ä½œè¿‡äºé¢‘ç¹ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | å†…éƒ¨é”™è¯¯ |

### ä¿¡ç”¨ç­‰çº§ä½“ç³»

| ç­‰çº§ | åˆ†æ•° | åç§° | æ¯æ—¥é¢åº¦ | æ›å…‰æƒé‡ | æ ‡è¯† | ç‰¹æƒ |
|------|------|------|----------|----------|------|------|
| ğŸ† | 90-100 | ä¼˜ç§€ | 3ä¸ª | 2.0x | é‡‘è‰² | å…å®¡+ç½®é¡¶ |
| â­ | 75-89 | è‰¯å¥½ | 2ä¸ª | 1.5x | é“¶è‰² | å…å®¡æ ¸ |
| ğŸ”¹ | 60-74 | ä¸€èˆ¬ | 2ä¸ª | 1.0x | è“è‰² | éœ€å®¡æ ¸ |
| âš ï¸ | 40-59 | è­¦å‘Š | 1ä¸ª | 0.5x | æ©™è‰² | éœ€å®¡æ ¸ |
| ğŸš« | 20-39 | å—é™ | 0ä¸ª | 0x | ç°è‰² | ç¦æ­¢å‘å¸ƒ |
| âŒ | 0-19 | å°ç¦ | 0ä¸ª | 0x | çº¢è‰² | ç¦æ­¢ç™»å½• |

---

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### æ ‡å‡†å¼€å‘æµç¨‹

```mermaid
graph LR
    A[åŠŸèƒ½å¼€å‘] --> B[æœ¬åœ°æµ‹è¯•]
    B --> C[ä¸Šä¼ äº‘å‡½æ•°]
    C --> D[çœŸæœºè°ƒè¯•]
    D --> E[æäº¤å®¡æ ¸]
    E --> F[å‘å¸ƒä¸Šçº¿]
```

### äº‘å‡½æ•°éƒ¨ç½²

```bash
# ä¸Šä¼ å•ä¸ªäº‘å‡½æ•°
npx wxcloud deploy -e <env-id> -p cloudfunctions/login

# ä¸Šä¼ æ‰€æœ‰äº‘å‡½æ•°
npx wxcloud deploy -e <env-id> -p cloudfunctions/
```

### æ•°æ®åº“æ“ä½œ

```javascript
// æ ‡å‡†æŸ¥è¯¢ç¤ºä¾‹
const db = wx.cloud.database()

// æŸ¥è¯¢æ´»è·ƒç”¨æˆ·
const { data } = await db.collection('users')
  .where({
    creditScore: db.command.gte(60),
    'dailyStats.date': '2026-02-02'
  })
  .orderBy('creditScore', 'desc')
  .limit(20)
  .get()
```

---

## ğŸ“– å‚è€ƒæ–‡æ¡£

### å¾®ä¿¡å®˜æ–¹æ–‡æ¡£
- [å°ç¨‹åºå¼€å‘æŒ‡å—](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [äº‘å¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)
- [äº‘å‡½æ•°æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions.html)
- [æ•°æ®åº“æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/database.html)

### é¡¹ç›®æ–‡æ¡£
- [DEVELOPMENT.md](./DEVELOPMENT.md) - å®Œæ•´å¼€å‘æ–‡æ¡£
- [miniprogram/CLAUDE.md](./miniprogram/CLAUDE.md) - å°ç¨‹åºæ¨¡å—æŒ‡å—
- [cloudfunctions/CLAUDE.md](./cloudfunctions/CLAUDE.md) - äº‘å‡½æ•°æ¨¡å—æŒ‡å—

---

## ğŸ¤– AI è¾…åŠ©å¼€å‘æç¤º

### ä»£ç ç”ŸæˆåŸåˆ™

1. **å®‰å…¨ä¼˜å…ˆ**: æ‰€æœ‰æ•æ„Ÿæ“ä½œå¿…é¡»éªŒè¯æƒé™
2. **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•ï¼Œé¿å…å…¨è¡¨æ‰«æ
3. **é”™è¯¯å¤„ç†**: å®Œæ•´çš„try-catchå’Œé”™è¯¯æ—¥å¿—
4. **æ•°æ®æ ¡éªŒ**: æ‰€æœ‰è¾“å…¥æ•°æ®å¿…é¡»æ ¡éªŒ
5. **ç¼“å­˜ç­–ç•¥**: åˆç†ä½¿ç”¨æœ¬åœ°ç¼“å­˜å‡å°‘è¯·æ±‚

### å¸¸è§å¼€å‘ä»»åŠ¡

**æ·»åŠ æ–°é¡µé¢ï¼š**
- åœ¨ `miniprogram/pages/` åˆ›å»ºé¡µé¢ç›®å½•
- é…ç½® `app.json` pagesæ•°ç»„
- éµå¾ªç°æœ‰é¡µé¢ç»“æ„å’Œæ ·å¼è§„èŒƒ

**æ·»åŠ æ–°äº‘å‡½æ•°ï¼š**
- åœ¨ `cloudfunctions/` åˆ›å»ºå‡½æ•°ç›®å½•
- ä½¿ç”¨ `index.js` + `config.json` æ ‡å‡†ç»“æ„
- é…ç½®å®šæ—¶è§¦å‘å™¨(å¦‚æœ‰éœ€è¦)
- æ›´æ–°æœ¬æ–‡ä»¶æ¨¡å—ç´¢å¼•

**ä¿®æ”¹æ•°æ®åº“Schemaï¼š**
- æ›´æ–° DEVELOPMENT.md ä¸­çš„Schemaå®šä¹‰
- åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
- ç¡®ä¿å‘åå…¼å®¹

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| 2026-02-02 | v1.0.0 | åˆå§‹åˆ›å»ºï¼ŒåŒ…å«å®Œæ•´é¡¹ç›®ä¸Šä¸‹æ–‡ |

---

## ğŸ‘¥ å›¢é˜Ÿè§„èŒƒ

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼(ä¸å½±å“åŠŸèƒ½)
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### ä»£ç å®¡æŸ¥æ¸…å•

- [ ] éµå¾ªå‘½åè§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„æ³¨é‡Š
- [ ] å¤„ç†äº†é”™è¯¯æƒ…å†µ
- [ ] éªŒè¯äº†è¾“å…¥æ•°æ®
- [ ] è€ƒè™‘äº†æ€§èƒ½å½±å“
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£

---

**â† è¿”å›é¡¹ç›®æ ¹ç›®å½•** | [DEVELOPMENT.md](./DEVELOPMENT.md) | [å°ç¨‹åºæ¨¡å— â†’](./miniprogram/CLAUDE.md)
