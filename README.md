# 点点圈 DotCircle - MVP 版本

## 📱 项目简介

点点圈是一个纯公益的腾讯元宝抽奖互助平台，基于微信小程序和微信云开发实现。

**核心理念**: 先助人，后受助。信用越好，曝光越高。

## 🚀 核心功能

### ✅ 已实现功能

1. **用户系统**
   - 微信一键登录
   - 新用户注册（默认60分信用）
   - 信用等级体系（优秀/良好/一般/警告/受限/封禁）
   - 每日任务统计

2. **礼包系统**
   - 链接模式发布（支持 yb.tencent.com 链接）
   - 图片模式发布（二维码上传）
   - 礼包列表（按曝光值排序）
   - 礼包详情查看
   - 礼包取消分享
   - 领取数更正

3. **互助机制**
   - 先助人后受助（需领取2个礼包才能发布）
   - 礼包领取（链接复制/图片查看）
   - 防重复领取
   - 互助记录

4. **信用体系**
   - 每日互助 +1分（上限2分/天）
   - 信用分实时计算
   - 等级自动判定
   - 每日额度分配

5. **页面展示**
   - 首页（礼包列表、搜索、筛选）
   - 发布页（任务检查、链接/图片切换）
   - 礼包详情页（进度、帮助者、操作）
   - 我的页面（信息、任务、统计、菜单）

## 📁 项目结构

```
AI-DotCircle/
├── miniprogram/              # 小程序前端
│   ├── app.js               # 应用入口
│   ├── app.json             # 页面配置
│   ├── app.wxss             # 全局样式
│   ├── sitemap.json         # 站点地图
│   ├── utils/
│   │   └── api.js           # API封装和工具函数
│   └── pages/
│       ├── index/           # 首页
│       ├── publish/         # 发布页
│       ├── package/detail/  # 礼包详情
│       └── my/              # 我的页面
├── cloudfunctions/          # 云函数后端
│   ├── login/               # 用户登录
│   ├── packages/            # 礼包CRUD
│   ├── help/                # 帮助操作
│   └── user/                # 用户信息
├── prototype/
│   └── prototype1.html      # UI原型图
├── DEVELOPMENT.md           # 完整开发文档
├── CLAUDE.md               # 项目AI上下文
└── project.config.json     # 项目配置
```

## 🛠️ 技术栈

- **前端**: 微信小程序原生框架 (WXML + WXSS + JS)
- **后端**: 微信云开发 (云函数 + 云数据库 + 云存储)
- **数据库**: MongoDB (微信云数据库)
- **云函数**: Node.js

## 📊 数据库集合

| 集合名 | 用途 |
|--------|------|
| `users` | 用户数据 |
| `packages` | 礼包数据 |
| `helpRecords` | 帮助记录 |
| `creditHistory` | 信用记录 |

## 🚀 快速开始

### 1. 环境准备

- 注册微信小程序账号
- 开通微信云开发
- 安装微信开发者工具

### 2. 项目导入

1. 打开微信开发者工具
2. 选择 "导入项目"
3. 选择项目根目录
4. 填写 AppID（测试号或正式号）
5. 勾选 "使用云开发"

### 3. 云开发配置

```bash
# 在微信开发者工具中
# 1. 点击 "云开发" 按钮开通环境
# 2. 记录环境 ID
# 3. 修改 cloudfunctions/*/index.js 中的 env 配置
```

### 4. 部署云函数

```bash
# 在微信开发者工具中
# 1. 右键 cloudfunctions/login 选择 "创建并部署：云端安装依赖"
# 2. 右键 cloudfunctions/packages 选择 "创建并部署：云端安装依赖"
# 3. 右键 cloudfunctions/help 选择 "创建并部署：云端安装依赖"
# 4. 右键 cloudfunctions/user 选择 "创建并部署：云端安装依赖"
```

### 5. 创建数据库

在云开发控制台数据库中创建以下集合：
- `users`
- `packages`
- `helpRecords`
- `creditHistory`

### 6. 运行预览

点击 "预览" 按钮，使用微信扫码查看效果。

## 📝 核心机制流程

```
用户进入平台
    ↓
领取2个他人礼包（完成互助任务）
    ↓
获得发布资格
    ↓
发布自己的礼包（链接或图片）
    ↓
其他用户领取，完成闭环
```

## 🎨 信用等级体系

| 等级 | 分数 | 名称 | 每日额度 | 曝光权重 | 特权 |
|------|------|------|----------|----------|------|
| 🏆 | 90-100 | 优秀 | 3个 | 2.0x | 免审+置顶 |
| ⭐ | 75-89 | 良好 | 2个 | 1.5x | 免审核 |
| 🔹 | 60-74 | 一般 | 2个 | 1.0x | 需审核 |
| ⚠️ | 40-59 | 警告 | 1个 | 0.5x | 需审核 |
| 🚫 | 20-39 | 受限 | 0个 | 0x | 禁止发布 |
| ❌ | 0-19 | 封禁 | 0个 | 0x | 禁止登录 |

## 📱 页面预览

### 首页
- 顶部搜索栏和类型筛选
- 礼包卡片列表（发布者、进度、操作）
- 悬浮发布按钮

### 发布页
- 今日任务检查
- 链接/图片模式切换
- 链接格式验证
- 互助契约开关

### 礼包详情
- 发布者信息
- 领取进度条
- 已帮助的人
- 礼包内容展示
- 操作按钮

### 我的页面
- 用户信息卡片
- 今日任务
- 统计数据
- 功能菜单

## 🔧 开发计划

### Phase 1: MVP（已完成 ✅）
- 基础架构和配置
- 核心页面开发
- 云函数实现
- 互助流程
- 信用体系基础

### Phase 2: 高级功能（开发中）
- 举报系统
- 排行榜
- 互助契约（24小时履约）
- 群组系统
- 成就徽章

### Phase 3: 优化
- 性能优化
- UI/UX 优化
- 测试覆盖
- 文档完善

## 📄 文档索引

- [DEVELOPMENT.md](DEVELOPMENT.md) - 完整开发文档
- [CLAUDE.md](CLAUDE.md) - 项目AI上下文
- [prototype/prototype1.html](prototype/prototype1.html) - UI原型图

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

## 📜 开源协议

MIT License

## 👨‍💻 开发团队

点点圈开发团队

---

**🎉 MVP 版本已就绪！开始体验互助的乐趣吧！**